const demo = `
..@@.@@@@.
@@@.@.@.@@
@@@@@.@.@@
@.@@@@..@.
@@.@@@@.@@
.@@@@@@@.@
.@.@.@.@@@
@.@@@.@@@@
.@@@@@@@@.
@.@.@@@.@.
`
const inputString = `
.@@@@.@@@@.....@@@@....@.@@.@@.@@.@@..@@.@.@@@@@@@@@.@@@@....@@.@@@@@......@@@@@@.....@.@@@@@.@@.@@.@@.@.@@@@@@@@.@@.@.@.@.@@.@@.@.@.@.@@.
@@@@.@@@@...@@@@.@...@....@@@@.@@.@.@@@@@@@.@...@@.@@.@@@@@.@@@@....@@@..@...@@@@.@@.@@@@..@.@.@@@@@@.@@...@@@@.@@.@@.@..@@@..@@@@@.@@@.@@
@...@.@.@.@..@@@.@...@@.@@..@.@...@@@@.@@@@@@@@@@@@@.@....@@@@@@...@@@@..@@@..@@...@.@@@@.@...@@@@@@@@@.@@@@@.@@@@@@@.@@@@@..@@@...@.@@@@@
@@.@@@@@@.@..@..@@@@@@@@@.@...@@@.@@.@.@@.@.@@@@.@.....@.@@@@@@.@.@..@@@@.@@@...@...@.@..@@..@.@..@.@.@@.@@@@.@..@@@@@..@@@@@.@..@@...@@@@
@.@@@@@.@@@@@@..@@.@@@@...@.@.@.@@@@.@@@@.@...@@@@@.@.@..@@@@@@.@.@@.@@@@.@@@@..@@@.@.@@.@.@.@...@..@..@@.....@@@@.@@@.@.@.@..@@@.@..@@@@@
@.@.@@@@.@..@..@@@@@.@.@.@@.@.@.@@@@..@.@@.@@@@@.@.@@@.@@.@..@@@@@@@@.@@....@@@.@.@@@.@@@.@@@...@@@@.@@@@....@@@@.@..@@@.@@@@.@@@@.@@@@@.@
@@..@@..@@@@@.@.@.@@@@@.@@@@@@@@@.@@.@@@@@@@@@@@@@@.....@@@@@@@@.......@@@@.@..@@@.@...@@@@@@@@.@@@@@.@@..@@.@@@@@.@.@@@@.@@....@@@@@.@.@@
.@.@@.@@@@@.@..@@@@@@@@@@.@@@@@@@@....@@..@@.@.@...@@.@@@@..@@@..@@@.@@@@@@..@@@@.@@@@@..@@....@.@@@@@.@@...@@@@@@.@@....@@@@@.@@@..@..@@.
.@@.@@.@....@@.@@@...@@@@@@..@@@@@..@@@..@..@..@@@.@@@..@@.@@@@@@@.@@@...@@@.@@..@.@@@@@.@@@@...@.@@@@@@.@@@@@...@..@@@@@..@.@@@@@@@...@..
@..@@@.@.@@@@@@@@@.@@@@@@..@@..@.@@@@@.@..@@@..@@@@.@.@...@.@@@@.@@..@@@@.@...@@@..@.@@@@.@@@@@@@.@.@@@@.@.@@@@@@@.@.@..@@..@@.@@.@@@@...@
@@.@@.@.@@.@.....@@@@.@@@@@....@@.@@@@.@.@.@@..@..@@@@@@@@.@@@.@@..@@@@@@@@@@@@@...@.@@@..@@.@@@....@@@...@@..@..@..@@....@.@@@@@@@@..@.@.
.@@@@@@@@@@.@@@@..@@@.@@@.@..@....@.@@@@@@@@..@@@@@@@@@@@.@.....@@@@..@@@..@@@@@..@.@@@@@@.@..@.@..@@.@.@@.@@@@@@@.@@@@@@...@@@@@.@@.@.@.@
.@.@@@..@@@....@..@.@@@.@@@@.@@@@@....@.@.@@@..@@..@.@@.@@.@@@.@.@.@@@@.@.@@@...@@.@@@...@.....@@@@@.@@@.@@@@.@@..@..@@.@@@.@@.@..@@@@@@@@
...@.@...@...@@@.@.@@.@.@@.@.@.....@.....@@@@@@.@@@.....@@@@.@@@@..@@..@@@@@@@@@@@@@..@@@@.@@@@.@..@@@@@@@..@@.@@@.@@@@@@@@@.@@..@@@@@@@.@
..@@@@@@@@@@..@@.@@@.@..@@@@@@@@@@...@@.@@.@@@@@@@@@@.@@.@.@@@@@@@.@.@..@@..@@@@@.@@.@@@@@@@@..@@@@@@.@@@@@@@@@@@.@.@@@@@.@@.@.@@@.@@.@...
.@@@.@@@.@.@@.@@@@@@@.@...@@@@.@@@.@@.@@..@..@@@@@@..@@.@@@.@.@@@@..@@@@@@@@@@@@.@@@@@.@@.@@@@@.@@@.@@@@@@@.@@@.@@@@@.@..@@.@@@.@@.@@@@@@@
.@@@@.@@@@@@@@@@@@@@...@@..@@.@@@.@@.@.@@@..@.@..@@@.@@@.@.@@@@@@@@@.@@@@.@..@@..@@@@@@@@.@..@@@....@.@@@@@@@.@.@@.@@..@@@@.@@@..@@.@@@.@@
...@@@@@...@@@@@@.@...@@.@@@@@..@@@@@@@.@@@@@@@@@@...@@@.@..@..@@@..@@@@@..@@@..@@@@.@@@@@@@@@.@.@@@.@@@.@@@@......@@@.@..@@.@.@..@@..@...
@@@.@@@.@@@@..@@.@..@.@@.@@@.@@@@@@@@@.@@.@@@.@@@@@@@@.@..@@@.@@@@.@@@..@@.@@@.@@.@..@@@@@.@.@.@.@@@..@@..@@...@..@@..@@@@@.@@@@@.@@@@..@@
@@@.@...@@.@@@.@@@@.@@@@@...@.@@.@.@@@@.@@@@.@@@..@@.@.@.@@@@.@@.@@..@@@@..@@@.@@@.@.@@@@.@.@@@.@@@@@@@@.@..@.@@@@.@@.@.@@@.@...@@@@@.@@@@
@.@@@.@.@.@@@@@@...@@@.@@@@@.@@@@@@@@..@@@@@@@@@@@@@@.@@.@@.@@@.@@@.@..@@@@.@...@@.@@@@@....@@.@.@@.@@@@@@...@@..@@@.@@.@@.@.@@@@..@..@@@.
.@@.@@...@@@.@@@@.@@@.@@@@@@@@@.@.@.@...@@...@@@@@@@@@@@@@@@@@@@.@..@.@@@..@..@@@..@@@@@.@@@@@@.@@@.@@@.@.@.......@@.@@....@@@@@@@.@@.@@.@
@.@.@@.@@@@.@@.@@@.@@..@@@@.@@.@.@@....@@@.@@.@@.@@..@@@.@@.@.@@.@.@@@@.@@@.@@@.@@@.@@.@@...@.@@@@@..@.@@@@@.@@.@.@..@@@@@@.@...@.@@@@...@
.@@@.@@@@@.@@@.@...@.@@@@@.@..@.@@@@@@@@@@@.@@@@@@@@@@.@.@@.@@@@.@@@@@..@@..@@.@@@@@.@@..@@@@@@@@...@@..@.@@@@.@@@.@.@@..@..@@.@@@..@@@@@.
.@.@@..@@.@.@...@@@.@@@@@@@@@....@.@@.....@@@...@@@@@@.@@.@....@@.@.@.@@@@@.@......@.@@@@@.@@@@.@@@@.@.@@@@@@@.@@.@@@@@@@..@@@@@@@.@@.@.@.
@@@.@@@.@@.@@@@.@@@@@..@@@.@.@@.@@@@@@@.@@@@@@.@@@@@.@@@@.@@...@@@.@@.@@@@.@@@@...@@@.@.@@@@@@.@@@@@@@@@@@@@.@@@@@@@...@@@@@@.@@@.@@.@@.@@
.@.@.@.@@@..@@.@@.@.@@@@@.@.@@@@.@..@@..@@@@.@@@@@..@.@.@@@@....@@...@.@@@@@..@@@.@.@@@@@..@.@.@@...@.@.@.@..@.@..@@@@@@@@@.@@@..@@@@@@@@@
@@@@@@@.@..@@@.@@@@@@.@@.@..@@@@@@@.@@.@.@@@.@@@....@@@@.@.@@@@@@..@.@@@.@.@.@@@@@@@@@@.@.@..@.@@@.@.@.@.@@..@.@.@@@@@@@@@.@@@@@@@.@@.@..@
@@@@..@...@@@@.@@@...@@@@@@@@@@@@.@@@.@.@@@@@..@@..@@@@.@...@@.@@@@.@..@....@@@@.@@...@..@..@@@@@@@...@.@@.@@@.@@.@.@.@@@@@.@@.@..@.@.@..@
..@.@.@@@..@..@@@@@@@@@.@@.@@@@@@@@@..@@@@@@@.@@@.......@.@.@@@.@@@@@@@@@@.@@..@@.@.@@.@.@.@@..@@.@@.@@@..@@.@@@@.@@@.@@@@@@@.....@...@.@@
@..@@..@..@@@.@@..@@@@@@.@@@@..@@@@.@@...@@@.@@@..@@@..@.@.@.@@@@@@@..@..@@@@@@@@@@@.@@@@....@@@..@.@@.@.@@@@.@@@@....@@.@.@@..@.@.@@@@.@@
.@.@..@..@@@@@@..@@@@@@@.@@@@@@@.@..@.@@@.@.@@.@..@@@@@.@.@@@@@@.....@.@@..@@@@.@.@@@@@@@@@@.@@@..@@@@@.@...@@@@@@@.@.@...@@@@@@@@.@@.@..@
@@@@.@@@@@.@@@.@.....@..@@..@@@@@@@@.@@......@...@@.@..@@@@.@.@@.@.@@@@.@@@...@@@.@@..@@...@@..@..@@@@.@@@@@@@@.@@@...@@@@@@@@.@..@@@..@@@
@.@..@.@.@@@.@..@@.@@@..@@@.@@....@.@@@@@..@.@.@....@@@.@@@..@..@@@@@@..@.@.@..@@.@..@@@.@@@@@@@@@@...@@@@@.@@.@@.@@@@@@@@@@.@..@@@@@@@..@
@@.@@.@@@.@@@.@@.@..@@@..@@.@@@@.@.@.@@@@@@.@@@@@@@@@......@.@@@.@.@@.@@@@.@@@....@@@.@@.@@..@@@..@.@@@@@@.@@@..@@@@@@@..@..@@@@..@@.@.@.@
.@@..@..@.@@@.@@@@@.@...@@@@@@@@.@...@@.@@@.@.@@@@.@@@@@.@@@@@@....@.@@@@@@@@@@@@..@@@@.@@@.@@.@.@@...@@.@.@...@@.@...@@@..@.@@.@.@@.@@@@@
@.@@.@@@@@@@@@@@@@@@@.@@.@@.@.@@..@@.@.@.@.@@@..@@@@@.@@@@..@@.@@@@@@@@@.@@@.@@@@@.@@@@@@.@@@@@@@.@@@@.@@@@@@@@..@@@@..@.@..@.@@.@@@@....@
@@.@.@.@@@@..@@@@@....@@@@@@@.@@@@.@@.@@@.@.@@.@@@..@@.@@@@.@..@.@@@@..@@@.@..@@@@@@..@.@@...@.@@.@.@.@@@@.@@.@@@.@....@...@.@@..@...@@.@@
@...@.@@.@@@@.@.@.@@.@@@..@@.@@.@@@...@....@@@.@@.@@.@.@@@@..@@@.@.@@@...@@@@@.@.@@.@..@@@...@@.@@.@@.@@@@.@..@@@.@.@.@@@@@@@@@.@@@@.@@@@.
@@@@@@.@@.@@@..@.@@@@@@..@@@.@@@.@@....@..@.@@.@@@@@@@@@@@@@@...@@@.@.@@@.@..@@.@..@@@@.@@@..@@@@..@.@@@@@..@.@@@@@@.@..@@@...@@@@@@.@@@@.
.@.@@@.@@.@@@@@.@@@@@@.@@@@@..@@.@.@@@..@..@@..@..@.@..@@..@..@@@.@@..@@@@.@@.....@@@@.@.@.@@.@@.@@@@.@@@@....@@.@@.@..@@.@.@.@.@@@@.@@@@.
.@@.@@@.@@@@@..@@@.@..@@.@@@@@....@@@@@@.@@@@@@@@@@.@@....@.@.@.@@@.@...@.@@.@@@@@@@.@@@@.@@@@@@@.@@.@@@.@..@@@@@.@.@..@.@..@@.@.@@.@@.@@.
....@.@@..@.@@..@@.@.@..@.@.@@.@@..@@..@@@..@..@.@.@@.@@@@..@.@@@@@....@@..@@.@.@@..@@....@@.@@..@..@......@@@..@@@@...@@@@@.@@@@@@@@@@@@.
@@@.@@@@.@@@.@@@@@@@.@.@@@..@@.@.@@@.@@.@@@...@@@@@@@..@.@@..@@.@...@@.@..@@@..@@.@@@..@@@@@@@@.@@@@@@..@@@@@.@@@@@@@@@@@....@@@@@@@@@@@@@
@..@@@@.@.@.@@@@@@.@.@@@.@@.@.@@@@@..@@.@@.@@@..@@@.@@@..@..@@..@...@...@@@.@.@..@..@@@..@@.@@@.@@@@@@@@@@.@@@@..@@..@..@.@@@@@@@.@@..@.@@
@@.@.@.@.@.@@@@.....@@.@@@@@@@@@..@.....@..@.@@.@.@.@.@.@@...@@@@@@@@...@....@.@@.@@@@.@@@.@@@@.@@@.@@@@@@@@...@@.@.@@@@@@@@@.@@@@@@.@.@@@
..@@@.@@@@.@.@@@.@@@.@@@.@@.@..@@@.@@@.@@..@..@@@@@.@@.@@@.@@@@@@@.@@@.@@@@@.@.@@@@@.@@.@.@@@.@.@@@@.@@@@.@@@@@...@@@@@@@.....@@@..@@.@@.@
.@@...@.@@@@.@@@@..@@@.@..@@@@@...@@.@@@.@.@@.@@@.@@@@@@.@.@@...@@@....@@.@@@@@@.@@@@.@@@..@@@@@.@@.@@.@..@@@@.@@@...@@..@@@@@@.@@@@@.@@@@
@@@@@@@@@.@.@.@.@......@...@@@@..@..@@..@.@@@.@@@@.@.@@@..@@@...@@@@@...@..@@.@@.@@@@@@.@@..@@.@@.@@@.@.@@.@..@.@.@@.@...@@@@.@@@@@@@@@@@@
@@.@@@.@@@@@.@@@...@.@@..@@@@@.@..@.@@..@@.@@.@@@.@@@@..@.@.@@@@@.@@.@@@@.@@@@.@.@@@@.@.@@@...@@@@.@.@@.@..@@@@@..@@@.@@@..@@@.@@.@@..@.@@
.@.@.@.@@@..@.@@@.@@.@@..@@@...@.@...@.@@..@..@.@@@.@@@.@@@@@@.@@@@@@@.@.@.@@.@@@.@@..@@...@@@@@@.@@@@.@..@@@...@@.@@@@@@..@@.@@@@.@@@@...
@@.@@@@@@@.@@@.@@.@@@...@.@@.@.@@@@@@@@@@.@...@@.@.@@@@@@@@.@@@@@.@.@@@@@@...@@......@@@..@@@@@@.@@@@@@@@@@.@...@.@@@@...@@@@.@@.@@@.@.@@@
@@@.@.@@.@@@@@@..@@@@@@.@...@....@@.@@@@@@@@@.@@@@@@@@..@..@@@@@@.@@@@@..@.@@.@.@@@.@@@@@@.@...@@..@..@@@..@@@.@....@@@@.@.@.@@@@@@@@.@@@@
@@@.@@@@@@.@@.@@..@@.@.@.@@@@@.@.@@@@.@@.@.@@@@@.@..@@@.@@@@@@@@.@@..@@@.@@@@@@@@.@@...@.@@@@@@@@@@@@@@@@.@@.@.@@@.@...@@@...@..@.@.@@@@.@
@.@...@@@.@@@@..@@..@@..@.@@@@..@.@.....@@..@.@@@@.@.@@@@@@@.@@.@.@@@...@.@@@@@.@@@..@@.@@@@@..@@@.@.@@.@@.@@@@@@@@@@@..@.@.@@.@@@.@.@@@.@
@@@@@@@..@@.@@.@..@@@...@.@.@@@@..@@@@@@.@..@.@.@@@@@..@@@@..@@@.@@@@@@.@@@@.@.@@@..@@@.@@.@@.@@@@@.@.@@.@.@@@@@.@@@@@@..@@@@@@@..@@@.@@@.
...@@@@@.@@@..@@..@@@@.@.@@@.....@@@@@@.@@@.@@.@@@@.@@...@@@.@@...@.@@@.@@@@@...@.@@@..@.@@.@@@@@@@@@....@.@@@.@@@.@@@@@@..@...@@@.@..@@.@
@..@@@.@@@@.@.@@@@.@.@@@...@@@@@..@@..@@..@@@.@@.@@@@.@@..@@@@@@@@@@@@@.@.@@@.@@..@@...@@@@@.@@.@@.@@@@@@@@@..@@@.@@.@@.@..@@@@@@.@@@@.@@@
@@@@@..@@..@@..@...@@@.@..@@@@@.@@....@@@@@@.@.@@@@@@@.@.@..@..@@@@@@@@.@@@@.....@@@@.@@@@@@@@@.@.....@@@@@@..@.@@@@@@@@@@.@@@@@@......@@@
@.@.@@@....@.@@@@@.@...@.@.@@@@.@@@..@@..@..@@@@@@@@@@@@@@.@.@@.@@@@.@@@@..@@@@.@@@.@@@@..@@@@..@@@..@@@...@..@.@@@@@@@@@@..@@@@@@@@..@@@.
@@....@@@.@@..@.@@.@..@@@.@.@..@@@.@@.@@.@@@@@@@@@@@@@.@@@.@.@.@@@@....@@.@@@.@@...@.@@@@@..@...@....@@@@@@@.@@..@@...@.@@.@@@.@.@@@.@.@.@
..@@@.@.@@@@.@.@@....@@...@@.@@@.@.@@.@.@@@@.@.@...@@@@@.@@.@@@@@.@@@@@@..@@.@@@@@@.@..@.@@.@@.@..@@@@@@@@@.@..@.@@.@@..@@@@@...@@@@@@.@.@
@@.@.@.@@.@@@.@@.@@@@@@.@.@..@.@@@.@@.@..@@@..@@@@@@@.@..@@@@..@@@.@@@.@@.@@@..@....@@@@@@@@@.@@@@@..@.@@@.@..@@@@@...@@@@.@..@.@.@.@...@@
..@@@@.@@@.@.@@..@.@@@@@.@@.@@@@.@@.@.@.@@@.@@.@..@@@@....@@.@@.@@.@.@.@@@@@...@@.@@@@@@@@@@@@@@@.@.@@@.@@.@..@..@@@@..@.@@..@@.@.@@..@@@@
@.@@@@@@.@@.@.@...@..@@..@@...@..@@@.@@@@@.@@@.@....@@@@..@@.@@@@@..@@..@@.@@@...@@.@@@@.@@.@.@.@@@@@@@@@@@.@@@@.@@@@.@..@.@@@@.@@.@.@@@@@
@@@@@.@.@.@@@@@@@@@@@@.@...@@@@@@@@@.@.@.@@@@@@.@.@...@@.@..@.@@@@@.@@.@@@@@.@@@.@@.@@@@@..@@@.@...@@@@..@@.@@.@@@@@@@@@@@@..@..@@.@@@@.@@
@@@@@.@@.@.@@@...@@.@@@@@@..@@@..@@@.@@.@@@.@@@@@.@@@@@...@..@@@@@@@@@@..@@@@.@@...@..@@@..@@@@@@@.@@@.@@..@.@@@@@@@@@..@@@@.@@.@@@@.@@.@.
@@@@@@@@@@@@@.@@@@@.@@@@@@@@@..@@@@@.@@.@@@@@@.@@@@@.@@.@.@.@@@@@.@@@@.@.@@.@@...@.@@@@.@@@@@.@@@@@.@@@@..@@@@@@@@@@@@@@.@..@...@.@@@@.@.@
@...@@@.@..@@@@.@@@@@...@@..@@..@@@@.@.@@..@@@@@@.@@.@@@.@..@@..@@@.@@.@@@@@.@..@.@@.............@@@.@.@@@..@@@@@@@@.@@...@.@@@.@.@@@@@@@.
.@@..@@@..@@.@..@@@@.@@.@...@..@@@@@@@.@@@@.@@@@@.@....@@@@@.@.@..@@.@.@@@..@...@.@@@@@@@.@@@.@..@@.@.@..@.@@..@@.@@@@@.@.@@.@@@@.@.@@@@@.
..@@@@@@.@.@.@.@@.@..@@@.@..@@@.@@@@..@@@@....@@@.@.@@@@@..@.@@@.@.@.@....@@.@...@.@@@@@@.@@@.@.@.@@@.@.@.@@@.@.@@@..@@@@@@@@..@@.....@@@@
.@@.@.@...@@@@@@@...@@@@@@@.@..@@.@@@@.@@@.@@@@...@.@@@@@@@@@...@@@@.@.@@..@@.@@@@@@.....@@@....@.@.@@@@.@@...@...@@@@@.@@.@@@@@.@.@@..@..
@@.@@@@@.@...@@.@@.@@..@.@@@@...@.@.@@.@@@@.@@.@....@@@.@@@@..@.@@..@@.@.@@.@.@@@@.@@..@@.@@@@@@@@@.@.@.@@.@@...@.@.@..@@@@@.@.@@..@@@.@.@
.@..@@...@.@@@@....@.@@@@@@@.@.@@@.@.@@.@@.@..@@@@@@.@@.@@.@.@.@@@@@@@@@..@@@@@@.@.@@.@@@@@.@@.@.@.@@@@@@@..@...@@.@@..@..@@@..@@@@@@@.@@.
.@...@@@@.@@..@...@..@.@@@@@@@@.@@@...@@.@@@@@@@.@@.@.@.@@@@@@@@@.@.@@@..@@.@.@..@.@@@@@.@@@@.@@@.@.@.@@@...@.@..@..@....@@.@@@.@...@.@..@
@...@@..@.@.@@@@..@.@.@@@..@@@.@@@@@..@@.@@@.@.@@..@@@@@.@@@@@@..@@...@@.@@@.@@@@@.@@..@@.@@@@@@@@@@.@@.@@@@@.@.@..@.@@@@.....@@@@@@@.@@@@
@.@@@.@..@@@@.@@.@@@@@@.@.@@@@@@.@..@@.@@@@@@@.@..@.@.@@@@@@..@@@.@.@..@@.@@@@.@@@@@@@@@@@...@....@..@..@.@....@@.@@@@@@@.@@@.@@@@@@.@.@@@
@.@..@@..@@..@....@@.@.@@.@..@@..@@@..@@@.@@.@@@@.@.@@.@.@@@@@@@@@@@.@@@@@@.@@@@@@@..@@.@.@@@@@@@@.....@.@@@.@@@@.@.@.@@..@@@@@.@.@..@@.@@
@@@@@@@.@@@@..@.@@@@@@.@.@.@@@@@.@.@@@@.@@@.@@@@@@@@@@@@@@.@@.@@@@@@@@@...@.@..@@@......@@@.@@@.@@@.@@..@@.@@@@..@.@.@@@.@@.@@..@@@@.@@.@.
.....@@@@...@@..@@.@@.@@@@.@@.@@@@.@@.@@@@@@@..@..@@@@@.@@@@@@@..@@.@@..@.@@@.@..@.@.@@@@@@@...@@@..@@@.@.@.@@..@.@.@@@.@....@.@@@@@...@@@
@..@@@@@.@.@.@@@@@.@@@@@.@@@.@@....@@.@@@@@@@.@.@@@...@@@@@@.@.@@@@.@@@.@@@..@@@@@.@@@@@.@@.@@@@@@@@@@@@@@@@.@@.@@@@.@@@...@@@@@.@@..@.@@.
.@@.@@.@.@@@@.@.@.@@@@@@@@@@@.@.......@@.@@..@@@@..@@.@@.@@.@@@.@@.@@.@@.@.@@.@..@@@.@.@@.@@@.@@.@@@@.@.@@@@@@..@@@@.@.@..@.@...@@@@@...@.
@@@.@.@@@@@@@@@@.@@@...@@@.@@@@...@@@@.@@@.@.@.@@@@@@@@@@....@.@..@.@.@@@@@..@@..@@.@@@@@@..@@.@.@@.@..@@@.@@@@.@@@@.@@@@@@@@@...@@.@@@.@.
@@@@.@@@@@@@.@@@@@@@@@@..@.@@..@@@..@.@@@@.@.@@@@@@..@.@@...@.@@@.@@..@.@..@@...@....@@.@.@@@@@..@@.@@@...@.@@@@@@@@..@@@@@@@@@...@..@..@@
@@@@.@.@@.@@@@.@@@@@.@@.@@@.@@@.@@@..@@..@@@.@@@.@@.@.@@@@.@@.@@.@..@@@@@.@@@@@@@@@@...@@@.@@.@...@.@@@....@@@@...@..@..@@....@.@.@@...@.@
@@..@.@@@@..@@@..@@.@@.@.@@@@...@@.@@.@.@@@.@@@....@@@@@.@@@@.@.@@..@@..@.@..@@@@@..@@.@@.@@@@@@@...@@.@@@..@.@@@.@.@@@@.@@..@@@@.@@@.@.@.
@@.@....@@@@@@@@@@@@@@...@@@.@@@@@@@@.@@.@@.@.@....@@.@.@@@@..@@@@..@@@@@@.@.@@@.@@@..@@@@@@@..@@@@.@@.@@.@...@.@@..@@@..@@@.@.@@@@..@@@@.
@....@.@@@.@.@@.@.@.@@@@....@@@...@@..@.@...@@@@..@@@.@@@@.@@@@@@.@.@@@@@.@@..@@@@@.@@@@...@@@@..@@@@@@@@@.@@@@@@@..@@.@@@@.@@@...@@@@@@.@
@@@@@@@@@@@..@@.@@@@.@@.@@.@@@.@@@.@@@...@@@@.@@..@@@@@@@.@@...@@@@@@.@@@@....@.@@@@@@.@@.@@@@.@.@..@@@@@..@@.@@...@@@@@@@.@.@@..@.@@.@@@.
@@.@@.@@@.@.@@.@..@.@.@@@@@@.@@@.@.@@@.@@@.@@@@..@.....@@@@.@.@@.@..@...@..@@.@@.@@.@@@@@.@..@.@@@@@.@@@..@.@@@.@@@@@@..@.@@@.@@.@@@@.@@@.
@@@@@@@.@@.@@@@.@@@@.@@@@@@@.@@...@@@@.@.@@..@@@@@.@.@@..@@@.@@@..@@@...@@@@..@@@@@...@@@@@.@@@..@.@@@@@@@@.@@.@@@@@.@@@.@@@.@@@...@@.@@.@
@@@..@.@@@.@...@..@@..@@@@@@.@@@@@@@@@.@.@@.@@....@.@@..@..@@@@@@@@@@.@@@@@@@@@.@@@.@..@.@@.@@@.@.@....@@....@@@@.@@.@@.@.@@.@@....@..@@@.
@@@@@@@@@@@@@@.@@@@.@...@.@..@@@.@@@..@@..@@@@@@@@.@..@.@@@..@@..@@..@@.@.@@@.@@@@@@@...@..@@.@@@.@@@@@@.@@@@.@.@@@@..@@@@.@@@..@@.@@@@..@
@.@@@@@@@.@@@@..@.@@@........@@@@@.@@@@@@@@@@.@@@.@..@@@.@@..@@@@@.@..@.@.@..@@....@.@@.@.@..@...@@@.@@@.@.@.@..@.@@@@@@.@@@..@@.@.@@.@.@@
@@@@@@@@@@.@@..@.@@@@@@@@@@.@.@@@.@@....@@@@@@..@@@@@@..@@@..@.@@..@@.@..@.@@.@@.@@..@@@@@@@@@.@@@@.@@@@..@.@@@.@.@.@@.@@@@@@@@@@@.@.@@.@.
@@@@@@@@.@@@@@@@@@.@@@@@@@@@.@..@@@@@@@@@.@@@.@@@@@.@@@@.@@.@@..@.@@@@@@.@@.@@@.@@@@@.@..@@@@..@@@..@@@@@@@@@.@@.@@@.@.@..@@..@@@@@.@.@..@
@@@@..@.@@..@.@@.@@.@.@@@@@@@@@@@@@@@@@@@@@@.@@@@@.@@@@@@.@@.@@@@..@.@@@@@@.@@..@@..@..@@@@@@.@.@@@.@@@@@@.@..@@@@.@@@@@@@@@@@@@@@@@@.@@@@
@..@.@@@@@@..@@..@@.@@@@@...@@.@@...@@@..@@.@@..@@@@@@@@@@.@@@@@@.@@@.@@.@@@.@@@@..@.@@@.@.@.@@.@.@@@..@@@@@@@..@@@.@@@@@..@@@@@@@@.@.....
..@...@@.@...@...@@.@@...@@.@@@@@.@@@@.@.@@.@...@@.@@..@@@@@@.@@@@.@@..@.@@@.@@@@.@@@@@@.@.@..@@@..@@.@.@.@@@@@.@@@@@@@.@.@@@@@@@@.@@.@..@
..@@@@@@@@@@@@@.@@.@@@...@@@@@@@@@@@@@@@@@@.@.@@@@@@@@@@@@@..@@@@@..@@.@@..@....@.@.@..@.@@@@@.@..@.@@@@@@@@..@@@@@@.@@....@@@..@@@@@.@@@@
.@@@@..@@@@@@....@@@@@@@@.@@..@.@.@.@@.@@.@@@.@@@..@..@@@.@.@@@@.@..@@.@.@@@@.@.@.@.@.@@.@@.@@@@@@.@@@..@.@@..@@@.@...@.@.@@@@@@@@@.@@.@@@
@@@...@.@@@@@@.@@@@..@.@@@@@@@@@@@.@@@@.@.@@.@.@@@@@@.@.@@.@@...@@..@.@@@@@@@@@@@.@.@@@.@.@..@@@..@@@.@@@@.@@.@..@.@@@.@.@....@..@.@@@@@@.
.@.@@@@@@.@@@@@@@@@.@@@@..@.@.@...@.@@@@@@.@@.@@@@@@@..@@@@@@..@.@@@.@.@.@..@@...@@@@@@@@.@.@@@.@.@@@.@..@@@.@@..@.@..@...@.@@@@@@@..@@@@.
..@.@..@@@.@@@@@..@.@@@@@@.@.@@@@@@....@.@@.@..@@..@@@@@@..@@@.@.@@@@.@@.......@@@@@...@..@@...@.@@..@.@.@.@@@.@@.@@@...@@@@.@.@.@.@@@@.@.
.@@.@@.@...@..@...@..@.@@.@@.@@@@@@.@@.@.@..@@@@@@@@@@@@@@..@@@@@@.@@@@...@@@@..@.@@@@@.@@@@.@@@@.@@....@@.@..@.@@..@@....@@.@@@@@@@.@..@@
@.@@..@@@.@.@@@@@.@@@@@..@@@.@@@@@@.@.@.@@.@@@......@@@.@..@@@.@@@@@@@@@@@.@.@@@@@@@.@@.@.@...@@...@..@@@@@.@..@@@@@@.@.@@@@@.@....@..@.@.
@@.@@@@.@@@.@@..@@@@@.@..@@.@@@@@@.@.@..@.@@@@@.@@.@.@@..@@@..@..@@.@@@..@@@.@@@..@@..@@......@@@.@@.@@.@@@@@@@..@@@.@@@@@@@@.@.@@@@.@@@@@
.@.@@@@@@...@.@..@@...@@@@@.@..@.@..@@@@@@@@@@.@@@@@@.@@@@.@@.@@.@....@@.@@@@@.@@..@@..@@@.@@@.@@@..@.@.@@@@@@.@@@..@@@@.@.@@.@.@@.@@@.@.@
@@@@@...@@..@.@@@..@@.@@@@@@.@@@@@@.@@@..@@@.@@@@.@@@.@.@.@@@@@@.@@@..@@@.@@.@@@@....@.@.@@@@@@@.@.@@@@@.@@@@@@@....@@@....@..@@@..@@.@@@@
@@.@@@@@@.@..@.@.@.@@...@..@@@@@@@.@@.@@@@..@@...@@..@....@@@..@.@@....@@@@@.@@@@@.@.@@.@..@..@@@@@@@@@@@@..@@@...@..@..@@@..@@.@@@@@@@.@.
.@@..@@@.@.@.@@@@.@...@@@@.@@@@@@.@.@@@@@@@@..@.@@@@@.@@.@@@.@@...@@...@@@.@@@@@@.@@@@@.@..@@@@@@@@@..@.@@..@.@.@..@@..@@@@...@@@..@@@@@@@
@...@...@@@@.@@@@.@.@@@@@.@@.@@..@@@.@.@..@@.@..@@@@@@@..@@..@@@@@@.@..@..@@@@@@@.@.@.@..@@@@@..@@@.@@@..@.@.@@@@@@@@@@.@@.@..@@@@@@@@@...
...@@.@@@@.@@.....@@@.@@@@@@@..@...@....@...@@.@@@@@@.@..@.@@.@..@.@......@@@@...@@@.@..@@@@.@@..@.@@@.@@....@@..@...@.@@..@@@..@@@@@@@.@.
@@.@@@@@@@@@@.@@..@..@@@@.@@@@@@.@..@@@.@@.@..@@@.@@@@..@.@@.@.@@@@@@@..@.@@@@@.@@.@.@.@@@.@.@..@@@..@@.@@@@@@@@@@@@..@@.@.@@..@..@@.@@.@.
@@@.@@@.@@@@@.@.@@@@@@..@@@@@@@...@..@@@@...@.@.@.@@.@..@@@.@@@..@@@@..@@.@@@@@@...@@.@.@@@@@...@@...@@@..@@@.@@@@@@.@@@@@@...@@@@@@.@.@.@
...@...@@@@@..@@.@.@.@@....@@@@@.@@@@@@..@@@@@.@.@.@@@...@..@@.@..@@@@@@..@@@.@@.@@.@.@@..@@@@@@.@..@@..@.@@.@..@@@@..@@@@@@@@@@@.@.@@@@.@
@@.@@@@@@.@@.@@@.@@@....@.@.@@@.@@@.@.@@@@@.@@..@.@@@@.@@@.@.@@.@..@....@@@@@@.@@.@@@@@@@.@@@.@@@@@.@.@@@.@@@.@@@@@..@@.@@@..@@@.@@@@.@...
@@.@@@.@@..@..@.@@.@.@...@.@@.@@@@@@@@@@.@.@@@.@.@..@@@....@@@@@@..@@..@@.@@.@@@@@@.@@@@@@@@.@@..@.@@@..@.@@@@.@@.@...@@@.@@@@@.@.@@@@.@@@
...@@@..@@@..@@.@@.@@@@@@..@@@@@@.@...@@@@.@@@@@@@@.@.@@@@@@@@@.@@@.@@@..@@@.@.@@@@@.@@.@@@@.@@@@@@@@.@.@.@@@...@.......@.@@.@...@@@@@@...
@@@@@@@...@.@@..@....@@@@@..@@@@.@.@@@@@..@@@@..@.@.@@@.@..@.@...@@.@..@@@.@@@.@@@.@@@@@.@.@@@@.@.@..@@.@@..@..@.@@@@@@.@...@.@@@..@@@.@@@
@.@.@@..@@.@@@@@@@@@@@..@@@.@@@..@..@@@@@@@@..@.@@@@@@@@@@.@@.@.@@..@@@.@....@@@.@..@.@@@@@.@.@@@@.@@@@@@@@.@@.@.@@.@.@.@.@@..@@@@@@@.@@..
.@@@@.@.@.@@@..@@@@...@@..@@.@@@@@...@@@@..@.@@@@@..@@.@@...@@@@..@@.@@@@@@.@.@.@@@@@@@@.@..@@@.@@@@.@.@.@@@@@@.@.@@@.@@@.@@@.@@.@@@@@@.@.
..@...@@@..@@@..@@@@@@@@..@.@@@@@..@@....@.@.@@@@@@@@.@@@..@....@@@@@@@@.@@.@..@.@@@..@.@@@.@@@@.@@@....@@@.@@.@.@@@@@.@.@@..@@@@@@..@@@@@
@@@@@@@@@..@@@..@@@@.@.@@@@@@@@@@@@@@@.@@.@..@.@..@@.@...@@@.@@@@.@..@@.@@@@.@@@@..@..@@.@@@@@@@@..@@@@@.@@..@@..@.@@@@.@@@@..@@.@..@@.@@@
@@.@@@@@.@@@@@@@@@.@.@.@.@.@@@@.@@@..@@.@@@@@@.@.@@@@@@@@@@@@@.@@@@.@@@@@.@@@.@@@.@.@@...@@@@.@@@@@.@.@@.@@@@.@@.@..@@@@...@@..@@@@@...@@@
@...@.@.@@@@.@.@..@@@@@.@..@@@.@..@.@.@@.@@@@@@@.@@.@@@@.@@@@@@@@.@@.@.@.@@@@.@@@..@@@@@@.@.@@.@.@@@@.@@.@@@.......@.@@@@@@.@@@.@.@..@@@@.
@@..@@.@@.@@@@..@..@@@@.@@..@@@.@.@.@@@@@@@@....@@.@.@@.@@.@@@.@@.@@@@@.@.@@@.@@@@@.@.@@@@@@@.@@@@@@@.@@@.@.@@.@.@@@.@@@.@.@@@@@@.@.....@@
@@@.@@@.@.@.@..@@@.@@@@@....@@.@@@..@@@@@@@.@@@@..@@@@.@.@.@.@.@@@@..@@.@@...@@...@.@.@.@....@@..@@@@@@@@@@@@@.@@.@@....@@@.@@@@.@...@..@@
..@@@@....@.@@.@.@.@@@@..@....@@@@@@@@@@.@@.@@@@@..@.@@@...@@@@@@..@..@@@@@@.@@@..@@@@@@.@.@@..@@@@@@@@@@.@@@.@@@@.@@@.@...@...@...@.@@@@.
@..@.@.@.@@.@@.@.@.@@...@@...@...@@@..@@@@@..@@@@@@@@.@@.@@@@.@..@@@..@..@@@@@..@..@@@..@@@.@..@.@@.@@@...@@@..@@.@..@..@@.@@@@@@@@@@@@.@@
@..@.@@.@@...@@@@@@@@.@..@@@..@@.@@@..@@@@@.@@@@@.@.@@@@@@@@@..@@.@..@@..@@.@@....@.@.@@.@.@@@@@...@.@..@@@.@...@.@.@@@@.@@.@@.@.@@@@@@.@@
.@.@..@...@@.@@...@..@@.@.@@@.@.@.@@.@@@.@.@@@@.@@...@@..@..@@@.@@@.@@@@@.@.@.@@@.@.@.@@@@@@..@@...@.@.@@.@@@.@@@@@..@.@.@.@@@.@.@.@@.@@@@
@@...@.@.@..@@@@..@..@@...@.@@@.....@.@@.@@@@@@@@@@@@.@@.@.@@@@@@@..@.@@@@@.@@.@@@@@.@@@.@@.@@@.@@@@@@@.@@@.@@@@..@.@@.@@@.@@@@@@@@@@@@.@@
@..@..@@.@@@@@.@@..@.@@.@@..@@.@@@@@.@..@@@@@@@.@@...@@@@@@.@.@.@@@...@.@.@..@@@..@@@@@.@...@.@.@.....@.@@.@..@@.@@@.@@..@@.@@.@@..@..@...
.@@.@.@@@@@@@@@@.@..@@@.@@@@....@@.@@@@@@@.@@.@.@@@@@@@.@..@.@@@@@@@...@@@...@@@...@@@@@@@@...@@@@.....@@@@@@@..@...@@.@@@@@@@@@@@..@@.@@@
..@@@@..@@@@...@@..@@@@@@@.@..@@@@@@@@@@@.....@@...@.@.@@@@.......@.@@@.@.@@@@@@@@@@.@@@@@@@@.@@.@..@.@.@@@.@@.@@@@.@.@@@@@@@@.....@@@@@.@
.....@@@...@@@.@@@@@.@@..@.@@...@...@.@@@@....@@..@@@@@.......@@...@.@@@..@@@@@.@@.@@@@@@@.@@@@@..@@@@..@@@@@@.@.@@@.@@@.@@@@@@..@@.@@@@@.
.@@.@@@@.@.@@.@@@@@@@..@@.@.@.@@@@.@.@@..@.@..@.@@@..@.@@@@@@@@@.......@@@@@..@.@.@@@@@@@@@@@@@..@@.@.@@@@@.@@.@@@@@@.@...@@.@@@.@.@.@..@@
`

const input = inputString.split('\n').map(line => line.trim()).filter(line => line.length > 0)

// Part One
const DIRECTIONS = [
    [0, 1],
    [1, 1],
    [1, 0],
    [1, -1],
    [0, -1],
    [-1, -1],
    [-1, 0],
    [-1, 1],
];

const processCell = (grid, row, col) => {
    const cell = grid[row][col];

    if (cell === '@') {
        let count = 0;
        for (const [dx, dy] of DIRECTIONS) {
            let x = row + dx;
            let y = col + dy;

            if (x >= 0 && x < grid.length && y >= 0 && y < grid[x].length) {
                if (grid[x][y] === '@') {
                    count++;
                }
            }
        }
        return count;
    }
}

const partOne = () => {
    let total = 0;

    for(let row = 0; row < input.length; row++) {
        for (let col = 0; col < input[row].length; col++) {
            const count = processCell(input, row, col);
            if (count < 4) {
                total++;
            }
        }
    }

    return total;
}

// Result
console.time("Part One");
console.log('Part One', partOne())
console.timeEnd("Part One");

// ------------------------------------------------
// ------------------------------------------------
// ------------------------------------------------
// Part Two
const partTwo = () => {
    let total = 0;
    let grid = input.map(row => row.split(''));
    let changed = true;

    while (changed) {
        changed = false
        const toRemove = []

        for(let row = 0; row < grid.length; row++) {
            for (let col = 0; col < grid[row].length; col++) {
                const count = processCell(grid, row, col);
                if (count < 4) {
                    toRemove.push([row, col]);
                }
            }
        }

        if(toRemove.length > 0){
            changed = true;
            total += toRemove.length;
            for(const [row, col] of toRemove){
                grid[row][col] = 'x';
            }
        }
    }

    return total;
}

// Result
console.time("Part Two");
console.log('Part Two', partTwo())
console.timeEnd("Part Two");
